<div *ngIf="!events || !eventsAtDate" #noData>
  <app-loader />
</div>

<div *ngIf="events && eventsAtDate" #data class="">
  <div class="grid">
    <div class="flex justify-content-end align-items-center col-12 relative">
      <app-profile-sign
        [name]="user.name"
        [lastname]="user.lastname"
        [email]="user.email"
        [role]="user.role"
        [padding]="15"
        [picture]="user.picture"
      />
    </div>

    <div class="col-12 flex justify-content-end mt-4 mb-3">
      <p-splitButton
        label="Crear"
        icon="pi pi-plus"
        [model]="this.items"
        styleClass="p-button-rounded p-button-sm p-button-secondary mt-3 mb-3"
      />
    </div>
  </div>

  <!-- create new community dialog -->
  <app-create-community />

  <!-- create event dialog -->
  <app-create-event />

  <div class="grid justify-content-between">
    <div class="col-8">
      <app-events-stats
        [asLink]="true"
        [activeEvents]="activeEventsCount"
        [inactiveEvents]="inactiveEventsCount"
        [totalRedeems]="totalRedeems"
      />

      <h2 class="text-500 text-md">Comunidades</h2>
      <div
        *ngIf="userRole === allowedRoles.ADMIN"
        class="w-full bg-white px-1 py-4 border-round-lg mb-4 mt-4"
      >
        <app-communities-carousel />
      </div>

      <h2 class="mt-6 text-500">Proximos eventos</h2>
      <div class="mt-2 w-full bg-white px-2 border-round-lg">
        <div class="w-full">
          <div
            *ngIf="!eventsAtDate || eventsAtDate.length === 0"
            class="col-12 flex justify-content-center align-items-center flex-column"
          >
            <span class="text-500">No hay eventos para mostrar</span>
            <i class="text-5xl text-500 pi pi-info-circle"></i>
          </div>

          <p-scroller
            [items]="eventsAtDate"
            [itemSize]="70"
            scrollHeight="250px"
            styleClass="w-full"
          >
            <ng-template
              pTemplate="event"
              let-event
              let-options="options"
              class=""
            >
              <a
                [routerLink]="['/dashboard/eventos', event.id]"
                style="text-decoration: none"
                class="text-400 w-full mb-4"
              >
                <app-event-card
                  [communityColor]="event.community.color"
                  [event]="event"
                />
              </a>
            </ng-template>
          </p-scroller>
        </div>
      </div>
    </div>

    <div
      class="col-3 border-round-lg p-2 bg-white flex flex-column align-items-center"
    >
      <img src="assets/ranking-cover.svg" alt="" class="w-4" />

      <div class="ranking-container overflow-y-scroll">
        <app-ranking-item />
      </div>
    </div>
  </div>
</div>
