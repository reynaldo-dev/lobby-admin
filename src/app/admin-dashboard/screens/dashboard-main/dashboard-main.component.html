<div *ngIf="!events || !eventsAtDate" #noData>
  <app-loader />
</div>

<div *ngIf="events && eventsAtDate" #data>
  <div class="grid">

    <div class="flex justify-content-end align-items-center col-12 relative">
      <app-profile-sign
        [name]="user.name"
        [lastname]="user.lastname"
        [email]="user.email"
        [role]="user.role"
        [padding]="15"
        [picture]="user.picture"
      />
    </div>

    <div class="mt-6 md:mt-4">
      <h2 class="text-600">Dashboard</h2>
    </div>

    <div class="col-12 flex justify-content-end mt-4">
      <p-splitButton
        label="Crear"
        icon="pi pi-plus"
        [model]="this.items"
        styleClass="p-button-rounded p-button-sm p-button-secondary"
      />
    </div>
  </div>

  <!-- create new community dialog -->
  <app-create-community />

  <!-- create event dialog -->
  <app-create-event />

  <div class="col-12">

    <app-events-stats
      [asLink]="true"
      [activeEvents]="activeEventsCount"
      [inactiveEvents]="inactiveEventsCount"
    />

    <h2 class=" text-500 text-md">Comunidades</h2>

    <div *ngIf="userRole === allowedRoles.ADMIN" class="lg:w-8 w-full bg-white px-1 py-4 border-round-lg mb-4 mt-4">
      <app-communities-carousel />
    </div>


    <h2 class="mt-6 text-500">Proximos eventos</h2>
    <div class="mt-2 bg-white lg:w-8 w-full bg-white p-4 border-round-lg">
      <div class=" mb-8 w-full">

        <div
          *ngIf="!eventsAtDate || eventsAtDate.length === 0"
          class="col-12 flex justify-content-center align-items-center flex-column"
        >
          <span class="text-500">No hay eventos para mostrar</span>
          <i class="text-5xl text-500 pi pi-info-circle"></i>
        </div>

        <p-scroller
          [items]="eventsAtDate"
          [itemSize]="70"
          scrollHeight="500px"
          styleClass="w-full pb-4"
        >
          <ng-template
            pTemplate="event"
            let-event
            let-options="options"
            class=""
          >
            <a
              [routerLink]="['/dashboard/eventos', event.id]"
              style="text-decoration: none"
              class="text-400  w-full"
            >
              <app-event-card
                [communityColor]="event.community.color"
                [event]="event"
              />
            </a>
          </ng-template>
        </p-scroller>
      </div>
    </div>

    
  </div>
</div>
