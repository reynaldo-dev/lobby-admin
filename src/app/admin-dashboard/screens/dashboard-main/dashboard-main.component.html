<div *ngIf="!events || !eventsAtDate" #noData>
  <app-loader />
</div>

<div *ngIf="events && eventsAtDate" #data class="">
  <div class="grid">
    <div class="col-12 md:col-12 flex justify-content-end">
      <p-splitButton
        label="Crear"
        icon="pi pi-plus"
        [model]="this.items"
        styleClass="p-button-rounded p-button-sm p-button-primary mt-3 mb-3 p-2"
      />
    </div>
  </div>

  <!-- create new community dialog -->
  <app-create-community />

  <!-- create event dialog -->
  <app-create-event />

  <div class="grid justify-content-between">
    <div class="col-12 md:col-12 lg:col-8">
      <app-events-stats
        [asLink]="true"
        [activeEvents]="activeEventsCount"
        [inactiveEvents]="inactiveEventsCount"
        [totalRedeems]="totalRedeems"
      />

      <div
        *ngIf="userRole === allowedRoles.ADMIN"
        class="w-full px-1 py-4 border-round-lg mb-4 mt-4 bg-white flex flex-column gap-5"
      >
        <h3 class="text-md">Comunidades</h3>
        <app-communities-carousel />
      </div>

      <div
        class="mt-2 w-full bg-white px-2 border-round-lg flex flex-column gap-4"
      >
        <h3 class="text-md">Proximos eventos</h3>
        <div class="w-full flex justify-content-center align-items-center">
          <div
            *ngIf="!eventsAtDate || eventsAtDate.length === 0"
            class="col-12 flex justify-content-center align-items-center flex-column gap-4"
          >
            <span class="text-500">No hay eventos para mostrar</span>
            <i class="text-5xl text-500 pi pi-info-circle"></i>
          </div>

          <p-scroller
            [items]="eventsAtDate"
            [itemSize]="70"
            scrollHeight="300px"
            styleClass="w-full"
          >
            <ng-template
              pTemplate="event"
              let-event
              let-options="options"
              class=""
            >
              <a
                [routerLink]="['/dashboard/eventos', event.id]"
                style="text-decoration: none"
                class="text-400 w-full mb-4"
              >
                <app-event-card
                  [communityColor]="event.community.color"
                  [event]="event"
                />
              </a>
            </ng-template>
          </p-scroller>
        </div>
      </div>
    </div>

    <div
      class="col-12 md:col-12 lg:col-3 border-round-lg p-2 bg-white flex flex-column align-items-center mt-4"
    >
      <img src="assets/ranking-cover.svg" alt="" class="w-4" />

      <div class="ranking-container overflow-y-scroll p-3">
        <app-ranking-item />
      </div>
    </div>
  </div>
</div>
